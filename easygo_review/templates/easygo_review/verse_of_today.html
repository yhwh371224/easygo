{% extends "easygo_review/base_verse.html" %}

{% block content %}
<style>
html, body {
        margin: 0;
        padding: 0;
        height: 100vh;           /* 화면 전체 높이 */
        width: 100%;
        font-family: 'Arial', sans-serif;
        display: flex;
        justify-content: center;  /* 가로 중앙 */
        align-items: center;      /* 세로 중앙 */
        text-align: center;
        background-image: url("{{ image_path }}");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        color: white;
        overflow: hidden;         /* 배경만 보이도록 스크롤 제거 */
    }

    /* 실제 성경 구절 텍스트 */
    .verse-text {
        margin: 0;
        font-size: 6vw;           /* 초기 폰트 크기 */
        max-width: 90%;           /* 좌우 여백 확보 */
        line-height: 1.3em;
        text-shadow: 2px 2px 6px rgba(0,0,0,0.7); 
        color: white;
    }

    /* 모바일 대응 */
    @media (max-width: 480px) {
        .verse-text {
            font-size: 5vw;       /* 화면 작아도 글자 줄이기 */
            line-height: 1.2em;
        }
    }
</style>

<script>
function fitTextToScreen() {
    const textEl = document.getElementById("verse-text");
    if (!textEl) return;

    let fontSize = parseInt(window.getComputedStyle(textEl).fontSize);
    const maxHeight = window.innerHeight * 0.9; // 화면의 90% 안에 들어오도록
    const maxWidth = window.innerWidth * 0.9;   // 좌우 10% 여백

    // 글자가 화면을 넘으면 폰트 줄이기
    while ((textEl.scrollHeight > maxHeight || textEl.scrollWidth > maxWidth) && fontSize > 10) {
        fontSize -= 1;
        textEl.style.fontSize = fontSize + "px";
    }
}

// 페이지 로드 시
window.addEventListener('load', fitTextToScreen);
// 화면 회전/크기 변경 시
window.addEventListener('resize', fitTextToScreen);
</script>

{% if image_path %}
<p class="verse-text" id="verse-text">{{ verse_text|linebreaksbr }}</p>
{% else %}
<p>No image available.</p>
{% endif %}

{% endblock %}
