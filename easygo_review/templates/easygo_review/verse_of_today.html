{% extends "easygo_review/base_verse.html" %}

{% block content %}

{% if image_path %}
<p class="verse-text" id="verse-text">{{ verse_text|linebreaksbr }}</p>
{% else %}
<p>No image available.</p>
{% endif %}

{% endblock %}

<style>
html, body {
        margin: 0;
        padding: 0;
        height: 100vh;           /* 화면 전체 높이 */
        width: 100%;
        font-family: 'Arial', sans-serif;
        display: flex;
        justify-content: center;  /* 가로 중앙 */
        align-items: center;      /* 세로 중앙 */
        text-align: center;
        background-image: url("{{ image_path }}");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        color: white;
        overflow-y: auto;         
    }

    /* 실제 성경 구절 텍스트 */
    .verse-text {
        margin: 0;
        font-size: 6vw;           /* 초기 폰트 크기 */
        max-width: 90%;           /* 좌우 여백 확보 */
        line-height: 1.3em;
        text-shadow: 2px 2px 6px rgba(0,0,0,0.7); 
        padding: 0 10px;          /* 좌우 여백 */
        color: white;
        word-wrap: break-word;
    }

    /* 모바일 대응 */
    @media (max-width: 480px) {
        .verse-text {
            font-size: 5vw;       /* 화면 작아도 글자 줄이기 */
            line-height: 1.2em;
        }
    }
</style>

<script>
function fitTextToScreen() {
    const textEl = document.getElementById("verse-text");
    if (!textEl) return;

    // 부모 요소 기준 실제 표시 높이 계산
    const parentHeight = textEl.parentElement.getBoundingClientRect().height * 0.9;
    const parentWidth  = textEl.parentElement.getBoundingClientRect().width * 0.9;

    let fontSize = parseInt(window.getComputedStyle(textEl).fontSize);

    // 글자가 부모 요소를 넘으면 폰트 줄이기
    while ((textEl.scrollHeight > parentHeight || textEl.scrollWidth > parentWidth) && fontSize > 10) {
        fontSize -= 1;
        textEl.style.fontSize = fontSize + "px";
    }
}

// 페이지 로드 시
window.addEventListener('load', fitTextToScreen);
// 화면 회전/크기 변경 시
window.addEventListener('resize', fitTextToScreen);
</script>

